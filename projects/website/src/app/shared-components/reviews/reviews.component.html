<!-- Review Summary -->
<review-summary [product]="product"></review-summary>

<ng-container *ngIf="reviews && reviews.length > 0">

    <!-- Positive & Negagive Reviews -->
    <ng-container *ngIf="positiveReview || negativeReview">
        <div class="display-flex justify-content-center margin-top-4 margin-bottom-4 flex-wrap flex-nowrap-sm">

            <!-- Postive Review -->
            <div *ngIf="positiveReview"
                class="border padding-2 margin-right-4-sm background-color-dark-gray"
                [ngClass]="{'margin-bottom-4 margin-bottom-0-sm': negativeReview}">

                <!-- Header -->
                <h2 class="alt-color">
                    Most helpful positive review
                </h2>

                <!-- Likes -->
                <div class="margin-bottom-2 font-italic">{{positiveReview.likes}} customers found this helpful</div>

                <!-- Review -->
                <review [review]="positiveReview"></review>
            </div>



            <!-- Negative Review -->
            <div *ngIf="negativeReview" class="border padding-2 background-color-dark-gray">

                <!-- Header -->
                <h2 class="alt-color">
                    Most helpful negative review
                </h2>

                <!-- Likes -->
                <div class="margin-bottom-2 font-italic">{{negativeReview.likes}} customers found this helpful</div>

                <!-- Review -->
                <review [review]="negativeReview"></review>
            </div>
        </div>
    </ng-container>


    <!-- Reviews -->
    <div id="reviews"
        class="margin-top-3 margin-bottom-4 border-top  padding-top-3 display-flex justify-content-between flex-wrap">

        <!-- Showing -->
        <div class="text-nowrap width-100 width-auto-xs margin-bottom-3 margin-bottom-0-xs">
                Showing {{reviewsStart}} - {{reviewsEnd}} of {{product.totalReviews | number}}
                review{{product.totalReviews > 1 ? 's' : ''}}
        </div>

        <!-- Sort Options -->
        <select [(ngModel)]="selectedSortOption" (change)="setSort()">
            <option *ngFor="let sortOption of sortOptions" [ngValue]="sortOption">Sort by
                {{sortOption.key}}</option>
        </select>
    </div>

    <!-- View All Button -->
    <button *ngIf="!paging && product.totalReviews > reviewsPerPage" class="primary-button margin-bottom-4" (click)="onViewAllReviewsClick()">
        View all {{product.totalReviews | number}} reviews
    </button>

    
    
    <!-- Customer Reviews -->
    <review *ngFor="let review of reviews; trackBy:trackReview" [review]="review" [showReviewHelpful]="true"
        (onReportReviewClick)="reportReview.show = true"></review>

    
    
        <!-- View All Button -->
    <button *ngIf="!paging && product.totalReviews > reviewsPerPage" class="primary-button" (click)="onViewAllReviewsClick()">
        View all {{product.totalReviews | number}} reviews
    </button>

    <paginator *ngIf="paging" [currentPage]="currentPage" [pageCount]="pageCount" (onPageChange)="setPage($event)"></paginator>


    <!-- Report Review -->
    <report-review #reportReview></report-review>
</ng-container>