<panel [title]="'Query Builder'">

    <div style="border: 1px solid #444444; background: #222222; padding: 2px; padding-right: 1px; padding-bottom: 1px;">


        
        <div style="height: 22px; background: #3b3b3b; margin-bottom: 2px; display: flex; align-items: center; justify-content: space-between; border-right: 1px solid #222222;">

            <div style="margin-left: 5px; display: flex; font-size: 12px; cursor: default;">
                <div style="color: #838383; margin-right: 3px;">Products:</div>
                <div style="color: #ebebeb;">0</div>
            </div>
            

            <div style="display: flex;">
                <div class="icon-container" [attr.title]="'Add'">
                    <div style="padding-bottom: 3px; color: #9e9e9e;">[&nbsp;&nbsp;]</div>
                </div>
    
                <div style="margin-left: 5px;" class="icon-container" (click)="onQueryAdd()" [attr.title]="'Add'">
                    <i class="fas fa-plus-circle"></i>
                </div>
            </div>
        </div>



        <div *ngIf="queryRows.length == 0"
            style="font-size: 11px; margin: -2px; color: #888888; height: 30px; display: flex; align-items: center; justify-content: center;">
            No queries available
        </div>


        <div *ngFor="let queryRow of queryRows; let queryRowIndex = index">



            <!-- =============================( AND/OR )============================= -->
            <div *ngIf="queryRowIndex != 0" style="width: 100%;">
                <query-dropdown [dropdownList]="logicalOperatorList" [selectedIndex]="0" [logicalOperator]="true"></query-dropdown>
            </div>




            <div style="display: flex;">







                <!-- Where -->
                <div style="width: 100%; height: 31px;">
                    <query-dropdown [dropdownList]="whereList" [selectedIndex]="queryRow.whereDropdownSelectedIndex" (onChange)="$event.newQueryRow(queryRowIndex)"></query-dropdown>
                </div>


                <!-- Operator -->
                <div *ngIf="queryRow.queryType != null" style="width: 100%; max-width: 35px;">

                    <query-dropdown *ngIf="queryRow.hasOperators" [dropdownList]="operatorList" [selectedIndex]="0" (onChange)="queryRow.updateOperator($event)"></query-dropdown>

                    <div *ngIf="!queryRow.hasOperators" style="background: #454545; width: 100%; height: 100%; border-left: 1px solid #5f5f5f; border-top: 1px solid #5f5f5f; border-right: 1px solid #000000; border-bottom: 1px solid #000000; display: flex; justify-content: center; align-items: center; cursor: default;">
                        =
                    </div> 
                </div>

                


                <!-- Value -->
                <div *ngIf="queryRow.queryType != null" style="width: 100%;">
                    <query-dropdown *ngIf="queryRow.valueType == valueType.Dropdown" [dropdownList]="queryRow.dropdownList" [selectedIndex]="queryRow.valueDropdownSelectedIndex" (onChange)="queryRow.updateValue($event)"></query-dropdown>
                </div>


                <!-- Delete -->
                <div style="background: #454545; width: 100%; max-width: 20px; border-left: 1px solid #5f5f5f; border-top: 1px solid #5f5f5f; border-right: 1px solid #000000; border-bottom: 1px solid #000000; display: flex; justify-content: center; align-items: center;" (click)="queryRow.onDelete(queryRowIndex)">
                    <div class="icon-container" [attr.title]="'Delete'">
                        <i style="font-size: 11px;" class="fas fa-trash-alt"></i>
                    </div>
                </div> 












            </div>

            

        
        </div>
        

    </div>
</panel>