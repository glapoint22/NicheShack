<div style="border: 1px solid #444444; background: #222222; padding: 2px; padding-right: 1px; padding-bottom: 1px;">


        
    <div style="height: 22px; background: #3b3b3b; margin-bottom: 2px; display: flex; align-items: center; justify-content: space-between; border-right: 1px solid #222222;">

        <div style="margin-left: 5px; display: flex; font-size: 12px; cursor: default;">
            <div *ngIf="!isSubQuery" style="color: #838383; margin-right: 3px;">Products:</div>
            <div *ngIf="!isSubQuery" style="color: #ebebeb;">0</div>
        </div>
        

        <div style="display: flex;">
            <div *ngIf="isSubQuery" class="icon-container" [attr.title]="'Delete'" (click)="subQueryDelete()">
                <i class="fas fa-trash-alt"></i>
            </div>

            <div class="icon-container" [attr.title]="'Add SubQuery'" (click)="onSubQueryAdd()">
                <div style="padding-bottom: 3px; color: #9e9e9e; margin-left: 5px;">[&nbsp;&nbsp;]</div>
            </div>

            <div style="margin-left: 5px;" class="icon-container" (click)="onQueryAdd()" [attr.title]="'Add Query'">
                <i class="fas fa-plus-circle"></i>
            </div>
        </div>
    </div>



    <div *ngIf="queryRows.length == 0"
        style="font-size: 11px; margin: -2px; color: #888888; height: 30px; display: flex; align-items: center; justify-content: center;">
        No queries available
    </div>


    <div *ngFor="let queryRow of queryRows; let queryRowIndex = index">




        





        <!-- =============================( AND/OR )============================= -->

        <div *ngIf="queryRowIndex != 0" style="width: 100%;">
            <query-dropdown [dropdownList]="logicalOperatorList" [selectedIndex]="0" [logicalOperator]="true"></query-dropdown>
        </div>



        <!-- =============================( NONE )============================= -->

        <div *ngIf="queryRow.queryType == null" style="display: flex;">

            <div style="width: 100%; height: 31px;">
                <query-dropdown [dropdownList]="whereList" [selectedIndex]="queryRow.whereDropdownSelectedIndex" (onChange)="$event.newQueryRow(queryRowIndex)"></query-dropdown>
            </div>

            <div style="background: #454545; width: 100%; max-width: 20px; border-left: 1px solid #5f5f5f; border-top: 1px solid #5f5f5f; border-right: 1px solid #000000; border-bottom: 1px solid #000000; display: flex; justify-content: center; align-items: center;" (click)="queryRow.onDelete(queryRowIndex)">
                <div class="icon-container" [attr.title]="'Delete'">
                    <i style="font-size: 11px;" class="fas fa-trash-alt"></i>
                </div>
            </div> 
        </div>




        <!-- =============================( DROPDOWN )============================= -->

        <div *ngIf="queryRow.valueType == valueType.Dropdown" style="display: flex;">

            <!-- Where -->
            <div style="width: 100%; height: 31px;">
                <query-dropdown [dropdownList]="whereList" [selectedIndex]="queryRow.whereDropdownSelectedIndex" (onChange)="$event.newQueryRow(queryRowIndex)"></query-dropdown>
            </div>

            <!-- Operator -->
            <div style="width: 100%; max-width: 35px;">

                <query-dropdown *ngIf="queryRow.hasOperators" [dropdownList]="operatorList" [selectedIndex]="0" (onChange)="queryRow.updateOperator($event)"></query-dropdown>

                <div *ngIf="!queryRow.hasOperators" style="background: #454545; width: 100%; height: 100%; border-left: 1px solid #5f5f5f; border-top: 1px solid #5f5f5f; border-right: 1px solid #000000; border-bottom: 1px solid #000000; display: flex; justify-content: center; align-items: center; cursor: default;">
                    =
                </div> 
            </div>

            <!-- Value -->
            <div style="width: 100%;">
                <query-dropdown [dropdownList]="queryRow.dropdownList" [selectedIndex]="queryRow.valueDropdownSelectedIndex" (onChange)="queryRow.updateValue($event)"></query-dropdown>
            </div>


            <!-- Delete -->
            <div style="background: #454545; width: 100%; max-width: 20px; border-left: 1px solid #5f5f5f; border-top: 1px solid #5f5f5f; border-right: 1px solid #000000; border-bottom: 1px solid #000000; display: flex; justify-content: center; align-items: center;" (click)="queryRow.onDelete(queryRowIndex)">
                <div class="icon-container" [attr.title]="'Delete'">
                    <i style="font-size: 11px;" class="fas fa-trash-alt"></i>
                </div>
            </div> 
        </div>






        <!-- =============================( PRICE )============================= -->

        <div *ngIf="queryRow.valueType == valueType.Price" style="height: 31px; display: flex;">
            <!-- Where -->
            <div style="width: 100%; height: 31px;">
                <query-dropdown [dropdownList]="whereList" [selectedIndex]="queryRow.whereDropdownSelectedIndex" (onChange)="$event.newQueryRow(queryRowIndex)"></query-dropdown>
            </div>
            

            <!-- Operator -->
            <div style="width: 100%; max-width: 35px;">
                <query-dropdown [dropdownList]="operatorList" [selectedIndex]="0"></query-dropdown>
            </div>


            <!-- Value -->
            <div style="background: #454545; width: 100%; border-left: 1px solid #5f5f5f; border-top: 1px solid #5f5f5f; border-right: 1px solid #000000; border-bottom: 1px solid #000000; display: flex; justify-content: flex-end; align-items: center;">
                <div style="display: flex; align-items: center; margin-left: 1px; margin-right: 1px;">
                    <input #wholeNumberInput1 id="wholeNumber1"
                        style="background: #242424; width: 100%; height: 22px; text-align: right; padding-right: 3px; padding-left: 0;"
                        placeholder="0" (input)="queryRow.updateWholeNumberValue($event.target, decimalInput1)">
                    <div style="margin-left: 1px; margin-right: 1px; font-size: 17px; font-weight: bold;">.
                    </div>
                    <input #decimalInput1 id="decimal1" style="background: #242424; width: 100%; height: 22px; padding-left: 3px;"
                        placeholder="00" maxlength="2"
                        (input)="queryRow.updateDecimalValue(wholeNumberInput1, $event.target)"
                        (blur)="queryRow.onDecimalInputBlur($event.target)">
                </div>
            </div> 


            <!-- Delete -->
            <div style="background: #454545; width: 100%; max-width: 20px; border-left: 1px solid #5f5f5f; border-top: 1px solid #5f5f5f; border-right: 1px solid #000000; border-bottom: 1px solid #000000; display: flex; justify-content: center; align-items: center;" (click)="queryRow.onDelete(queryRowIndex)">
                <div class="icon-container" [attr.title]="'Delete'">
                    <i style="font-size: 11px;" class="fas fa-trash-alt"></i>
                </div>
            </div> 
        </div>








        <!-- =============================( ITEM LIST )============================= -->

        <div *ngIf="queryRow.valueType == valueType.ItemList">

            <div style="height: 31px; display: flex;">

                <!-- Where -->
                <div style="width: 100%; height: 31px;">
                    <query-dropdown [dropdownList]="whereList" [selectedIndex]="queryRow.whereDropdownSelectedIndex" (onChange)="$event.newQueryRow(queryRowIndex)"></query-dropdown>
                </div>
                

                <!-- Operator -->
                <div style="width: 100%; max-width: 35px;">
                    <div style="background: #454545; width: 100%; height: 100%; border-left: 1px solid #5f5f5f; border-top: 1px solid #5f5f5f; border-right: 1px solid #000000; border-bottom: 1px solid #000000; display: flex; justify-content: center; align-items: center; cursor: default;">
                        =
                    </div> 
                </div>


                <!-- Value -->
                <div style="background: #454545; width: 100%; border-left: 1px solid #5f5f5f; border-top: 1px solid #5f5f5f; border-right: 1px solid #000000; border-bottom: 1px solid #000000; display: flex; justify-content: flex-end; align-items: center;">
                    
                    <div class="icon-container"
                        (click)="queryRow.onListItemDelete()"
                        style="margin-right: 6px;"
                        (mouseout)="itemList.onIconButtonMouseOut()"
                        (mouseover)="itemList.isOverIconButton = true"
                        [ngClass]="{'icon-disabled': itemList.deleteIcon.isDisabled}"
                        [attr.title]="!itemList.isMultiSelected ? 'Delete ' + queryRow.itemType : 'Delete ' + queryRow.itemTypes">
                        <i class="fas fa-trash-alt"></i>
                    </div>
                    
                    

                    <div class="icon-container" 
                        (click)="queryRow.openPopup($event.target)"
                        style="margin-right: 7px;"
                        [attr.title]="'New ' + queryRow.itemType"
                        (mouseout)="itemList.onIconButtonMouseOut()"
                        (mouseover)="itemList.isOverIconButton = true"
                        [ngClass]="{'icon-disabled': itemList.addIcon.isDisabled}"><i
                            class="fas fa-plus-circle"></i>
                    </div>
                </div> 


                <!-- Delete -->
                <div style="background: #454545; width: 100%; max-width: 20px; border-left: 1px solid #5f5f5f; border-top: 1px solid #5f5f5f; border-right: 1px solid #000000; border-bottom: 1px solid #000000; display: flex; justify-content: center; align-items: center;" (click)="queryRow.onDelete(queryRowIndex)">
                    <div class="icon-container" [attr.title]="'Delete'">
                        <i style="font-size: 11px;" class="fas fa-trash-alt"></i>
                    </div>
                </div> 
            </div>

            <div style="display: flex;">
                <div style="background: #303030; width: 100%; border-left: 1px solid #505050; border-top: 1px solid #505050; border-bottom: 1px solid #000000;"></div>
                <div style="background: #303030; width: 100%; max-width: 35px; border-top: 1px solid #505050; border-right: 1px solid #1d1d1d; border-bottom: 1px solid #000000;"></div>
                <div style="background: #272727; width: 100%; border-left: 1px solid #1f1f1f;  border-right: 1px solid #424242; border-bottom: 1px solid #303030;">
                    <item-list #itemList [listItems]="queryRow.listItems"
                        [listOptions]="queryRow.listOptions(itemList)">
                    </item-list>

                    <div *ngIf="queryRow.listItems && queryRow.listItems == 0" style="cursor: default;" class="no-property" (contextmenu)="$event.preventDefault()" (mouseup)="itemList.setContextMenu($event)">
                        No {{queryRow.itemTypes}} Available
                    </div>
                </div> 
                <div style="background: #303030; width: 100%; max-width: 20px; border-top: 1px solid #505050; border-right: 1px solid #000000; border-bottom: 1px solid #000000;"></div> 
            </div>
        </div>



        <!-- =============================( EDITABLE ITEM LIST )============================= -->

        <div *ngIf="queryRow.valueType == valueType.EditableItemList">

            <div style="height: 31px; display: flex;">

                <!-- Where -->
                <div style="width: 100%; height: 31px;">
                    <query-dropdown [dropdownList]="whereList" [selectedIndex]="queryRow.whereDropdownSelectedIndex" (onChange)="$event.newQueryRow(queryRowIndex)"></query-dropdown>
                </div>
                

                <!-- Operator -->
                <div style="width: 100%; max-width: 35px;">
                    <div style="background: #454545; width: 100%; height: 100%; border-left: 1px solid #5f5f5f; border-top: 1px solid #5f5f5f; border-right: 1px solid #000000; border-bottom: 1px solid #000000; display: flex; justify-content: center; align-items: center; cursor: default;">
                        =
                    </div> 
                </div>


                <!-- Value -->
                <div style="background: #454545; width: 100%; border-left: 1px solid #5f5f5f; border-top: 1px solid #5f5f5f; border-right: 1px solid #000000; border-bottom: 1px solid #000000; display: flex; justify-content: flex-end; align-items: center;">
                    
                    <div class="icon-container"
                        (click)="queryRow.onListItemDelete()"
                        style="margin-right: 6px;"
                        (mouseout)="editableItemList.onIconButtonMouseOut()"
                        (mouseover)="editableItemList.isOverIconButton = true"
                        [ngClass]="{'icon-disabled': editableItemList.deleteIcon.isDisabled}"
                        [attr.title]="!editableItemList.isMultiSelected ? 'Delete ' + queryRow.itemType : 'Delete ' + queryRow.itemTypes">
                        <i class="fas fa-trash-alt"></i>
                    </div>
                    
                    
                    <div class="icon-container" 
                        (click)="queryRow.onListItemEdit()"
                        style="margin-right: 6px;"
                        [attr.title]="'Edit ' + queryRow.itemType"
                        (mouseout)="editableItemList.onIconButtonMouseOut()"
                        (mouseover)="editableItemList.isOverIconButton = true"
                        [ngClass]="{'icon-disabled': editableItemList.editIcon.isDisabled}"><i
                            class="fas fa-edit"></i>
                    </div>
                    

                    <div class="icon-container" 
                        (click)="queryRow.onListItemAdd()"
                        style="margin-right: 7px;"
                        [attr.title]="'New ' + queryRow.itemType"
                        (mouseout)="editableItemList.onIconButtonMouseOut()"
                        (mouseover)="editableItemList.isOverIconButton = true"
                        [ngClass]="{'icon-disabled': editableItemList.addIcon.isDisabled}"><i
                            class="fas fa-plus-circle"></i>
                    </div>
                </div> 


                <!-- Delete -->
                <div style="background: #454545; width: 100%; max-width: 20px; border-left: 1px solid #5f5f5f; border-top: 1px solid #5f5f5f; border-right: 1px solid #000000; border-bottom: 1px solid #000000; display: flex; justify-content: center; align-items: center;" (click)="queryRow.onDelete(queryRowIndex)">
                    <div class="icon-container" [attr.title]="'Delete'">
                        <i style="font-size: 11px;" class="fas fa-trash-alt"></i>
                    </div>
                </div> 
            </div>

            <div style="display: flex;">
                <div style="background: #303030; width: 100%; border-left: 1px solid #505050; border-top: 1px solid #505050; border-bottom: 1px solid #000000;"></div>
                <div style="background: #303030; width: 100%; max-width: 35px; border-top: 1px solid #505050; border-right: 1px solid #1d1d1d; border-bottom: 1px solid #000000;"></div>
                <div style="background: #272727; width: 100%; border-left: 1px solid #1f1f1f;  border-right: 1px solid #424242; border-bottom: 1px solid #303030;">
                    <editable-item-list #editableItemList [listItems]="queryRow.editableListItems"
                        [listOptions]="queryRow.editableListOptions(editableItemList)">
                    </editable-item-list>

                    <div *ngIf="queryRow.editableListItems && queryRow.editableListItems == 0" style="cursor: default;" class="no-property" (contextmenu)="$event.preventDefault()" (mouseup)="editableItemList.setContextMenu($event)">
                        No {{queryRow.itemTypes}} Available
                    </div>
                </div> 
                <div style="background: #303030; width: 100%; max-width: 20px; border-top: 1px solid #505050; border-right: 1px solid #000000; border-bottom: 1px solid #000000;"></div> 
            </div>
        </div>





        <!-- =============================( DATE )============================= -->

        <div *ngIf="queryRow.valueType == valueType.Date" style="height: 31px; display: flex;">

            <!-- Where -->
            <div style="width: 100%; height: 31px;">
                <query-dropdown [dropdownList]="whereList" [selectedIndex]="queryRow.whereDropdownSelectedIndex" (onChange)="$event.newQueryRow(queryRowIndex)"></query-dropdown>
            </div>
            

            <!-- Operator -->
            <div style="width: 100%; max-width: 35px;">
                <query-dropdown [dropdownList]="operatorList" [selectedIndex]="0"></query-dropdown>
            </div>


            <!-- Value -->
            <div style="position: relative; background: #454545; width: 100%; border-left: 1px solid #5f5f5f; border-top: 1px solid #5f5f5f; border-right: 1px solid #000000; border-bottom: 1px solid #000000; display: flex; justify-content: flex-end; align-items: center;">
                
                <input #dateInput type="date" style="width: 55px; height: 22px; pointer-events: all;" (input)="queryRow.updateValue($event.target)">

                <div style="background: #454545; position: absolute; width: 100%; height: 100%; pointer-events: none; display: flex; align-items: center;">

                    <input [value]="dateInput.value | date :'M/d/yy'" placeholder="mm/dd/yy" style="background: #242424; width: 100%; height: 22px; display: flex; align-items: center; padding-left: 3px; margin-left: 1px;">

                    <i class="far fa-calendar-alt" style="font-size: 15px; margin-left: 4px; margin-right: 4px; color: #7c7c7c;"></i>
                </div>
            
            </div> 


            <!-- Delete -->
            <div style="background: #454545; width: 100%; max-width: 20px; border-left: 1px solid #5f5f5f; border-top: 1px solid #5f5f5f; border-right: 1px solid #000000; border-bottom: 1px solid #000000; display: flex; justify-content: center; align-items: center;" (click)="queryRow.onDelete(queryRowIndex)">
                <div class="icon-container" [attr.title]="'Delete'">
                    <i style="font-size: 11px;" class="fas fa-trash-alt"></i>
                </div>
            </div> 
        </div>


        

        <!-- =============================( SUB QUERY )============================= -->

        <div *ngIf="queryRow.queryType == queryType.SubQuery" style="width: 100%; margin-top: 11px; margin-bottom: 11px; padding-left: 11px; padding-right: 11px;">
            <query-list #queryList [queryBuilder]="queryBuilder" [isSubQuery]="true" (onSubQueryDelete)="queryRow.onDelete(queryRowIndex)" (subQueryRows)="queryRow.subQueryRows = $event"></query-list>
        </div>
    </div>
</div>