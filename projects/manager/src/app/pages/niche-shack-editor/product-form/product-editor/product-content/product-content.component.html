<fieldset class="margin-right-3-xxl" style="height: 294px; position: relative;">
    <legend>Content</legend>
    <div class="icon-bar">
        <!-- Trash -->
        <div title="Delete"
             class="icon-container">
            <i class="fas fa-trash-alt"></i>
        </div>
    </div>

        
    <div class="background">

        <table>

            <!---------- (1st Row) ---------->
            <tr>
                <td></td>
                <td></td>
                <td></td>

                <!-- column selectors -->
                <td *ngFor="let pricePoint of productContent.pricePoints; let columnIndex = index"
                    #columnSelector
                    tabindex="-1"
                    (contextmenu)="$event.preventDefault()"
                    [ngClass]="{'selected-cells': selectedColumnIndex == columnIndex}"
                    (mousedown)="onColumnSelectorDown(columnIndex)" 
                    (mouseup)="setContextMenu($event)">
                </td>
            </tr>



            <!---------- (2nd Row) ---------->
            <tr>
                <td></td>
                <td></td>
                <td>Items</td>

                <!-- Price points -->
                <td *ngFor="let pricePoint of productContent.pricePoints; let columnIndex = index"
                    #pricePoint
                    tabindex="-1"
                    (mousedown)="onPricePointDown(columnIndex, pricePoint)" 
                    (click)="onPricePointClick()"
                    [ngClass]="{'selected-cells': selectedColumnIndex == columnIndex, 'selected-price-point': productContent.selectedPricePointIndex == columnIndex}">
                    {{(productContent.pricePoints[columnIndex].textBefore.length == 0 ? productContent.pricePoints[columnIndex].textBefore : productContent.pricePoints[columnIndex].textBefore + " ")
                        + 
                        (productContent.pricePoints[columnIndex].wholeNumber + "." + productContent.pricePoints[columnIndex].decimal | currency:"USD") 
                        + 
                        (productContent.pricePoints[columnIndex].textAfter.length == 0 ? productContent.pricePoints[columnIndex].textAfter : " " + productContent.pricePoints[columnIndex].textAfter) }}
                </td>
            </tr>


            <!---------- (Item Rows) ---------->
            <tr *ngFor="let item of productContent.items; let rowIndex = index">

                <!-- Row selectors -->
                <td #rowSelector
                    tabindex="-1"
                    (contextmenu)="$event.preventDefault()" 
                    [ngClass]="{'selected-cells': selectedRowIndex == rowIndex}"
                    (mousedown)="onRowSelectorDown(rowIndex)" 
                    (mouseup)="setContextMenu($event)">
                </td>

                <!-- Item types -->
                <td #itemType
                    tabindex="-1"
                    (mousedown)="onItemTypeDown(rowIndex, itemType)" 
                    (click)="onItemTypeClick(rowIndex)"
                    [ngClass]="{'selected-content-type': productContent.selectedItemTypeIndex == rowIndex,'selected-cells': selectedRowIndex == rowIndex}">
                    <img [src]="productContent.items[rowIndex].type" draggable="false">
                </td>

                <!-- Item descriptions -->
                <td #itemDesc 
                    tabindex="-1"
                    contenteditable="true"
                    [textContent]="productContent.items[rowIndex].description"
                    (input)="setItemDescription(rowIndex, itemDesc, $event)"
                    [ngClass]="{'selected-cells': selectedRowIndex == rowIndex, 'item-description-placeholder': productContent.items[rowIndex].showPlaceholder, 'selected-item-description': selectedItemDescriptionIndex == rowIndex}"
                    (focus)="onItemDescriptionFocus(rowIndex)">
                </td>

                <!-- Price point options -->
                <td *ngFor="let pricePointOption of productContent.pricePoints; let columnIndex = index"
                    #pricePointOption
                    tabindex="-1"
                    (mousedown)="onPricePointOptionDown(columnIndex, rowIndex)" 
                    (click)="onPricePointOptionClick()"
                    [ngClass]="{'selected-cells': selectedColumnIndex == columnIndex || selectedRowIndex == rowIndex, 
                                    'selected-column': selectedColumnIndex == columnIndex, 
                                    'selected-row': selectedRowIndex == rowIndex, 
                                    'selected-price-point-option': selectedPricePointOptionColumnIndex == columnIndex && selectedPricePointOptionRowIndex == rowIndex}">
                    <i [ngClass]="{'fas fa-check': productContent.items[rowIndex].pricePointOptions[columnIndex]}"></i>
                </td>
            </tr>
        </table>
    </div>
</fieldset>