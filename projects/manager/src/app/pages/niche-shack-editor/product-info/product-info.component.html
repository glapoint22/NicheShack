<div *ngIf="productService.product" class="container">
    <div class="product-container">

        <!-- Media -->
        <ng-container *ngIf="productService.product.media.length > 0">
            <!-- Thumbnails -->
            <div *ngIf="productService.product.media.length > 1" class="media"
                [scrollTop]="this.productService.scrollTop">

                <ng-container *ngFor="let media of productService.product.media; let thumbnailIndex = index">
                    <div *ngIf="media.url || media.thumbnail" class="thumbnail"
                        [ngStyle]="{ 'background-image': 'url(images/' + (media.type == mediaType.Video ? media.thumbnail : media.url) + ')'}"
                        [ngClass]="{'selected-thumbnail': this.productService.currentSelectedMediaIndex == thumbnailIndex}"
                        (click)="onThumbnailClick(media, thumbnailIndex)">
                        <i *ngIf="media.type == mediaType.Video" class="far fa-play-circle"></i>
                    </div>
                    <div *ngIf="!media.url && !media.thumbnail" class="thumbnail no-thumbnail"
                        [ngClass]="{'selected-thumbnail': this.productService.currentSelectedMediaIndex == thumbnailIndex}">
                        No thumbnail available
                    </div>
                </ng-container>


            </div>

            <!-- Media display -->
            <div class="img-container">
                <ng-container
                    *ngIf="productService.currentSelectedMedia.url || productService.currentSelectedMedia.safeUrl; else noMedia">
                    <img *ngIf="productService.currentSelectedMedia.type == mediaType.ProductMediaImage"
                        [src]="'/images/' + productService.currentSelectedMedia.url">

                    <iframe *ngIf="productService.currentSelectedMedia.type == mediaType.Video" frameborder="0"
                        [src]="productService.currentSelectedMedia.safeUrl" allowfullscreen></iframe>
                </ng-container>

                <ng-template #noMedia>
                    <div>No media available</div>
                </ng-template>

            </div>
        </ng-container>




        <!-- Product -->
        <div class="product-info">
            <!-- Title -->
            <div class="title">{{productService.product.name}}</div>

            <ng-container *ngIf="productService.product.totalReviews > 0">
                <!-- Rating -->
                <stars class="margin-right-4" [rating]="productService.product.rating"></stars>

                <!-- Reviews -->
                <span class="reviews" *ngIf="productService.product.rating > 0">
                    {{productService.product.totalReviews | number}} reviews
                </span>
            </ng-container>



            <!-- Price -->
            <div class="price">
                <div *ngIf="productService.product.maxPrice == 0">
                    {{productService.product.minPrice | currency:'USD'}}
                </div>
                <div *ngIf="productService.product.maxPrice > 0">
                    {{productService.product.minPrice | currency:'USD'}} -
                    {{productService.product.maxPrice | currency:'USD'}}
                </div>


            </div>

            <div *ngIf="productService.product.hoplink" class="product-button"
                (click)="onBuyClick(productService.product.hoplink)">Visit Product Page To Buy
            </div>

            <!-- Description -->
            <div class="description" [innerHTML]="productService.product.safeDescription"></div>
        </div>
    </div>



    <!-- Product Conent -->
    <ng-container *ngIf="productService.product.content.length > 0">
        <!-- Heading -->
        <h3 [ngClass]="{'text-center margin-left-8': productService.product.pricePoints.length > 1}">
            {{productService.product.pricePoints.length > 1 ? 'Payment options' : 'Included with your purchase'}}
        </h3>


        <!-- Content -->
        <div
            [ngClass]="{'display-flex justify-content-center flex-wrap': productService.product.pricePoints.length > 1}">

            <!-- Price Points -->
            <div *ngFor="let pricePoint of productService.product.pricePoints; let i = index"
                [ngClass]="{'price-points-container': productService.product.pricePoints.length > 1}">


                <div *ngIf="productService.product.pricePoints.length > 1" class="price-points">
                    {{pricePoint.textBefore}} {{pricePoint.wholeNumber + (pricePoint.decimal * 0.01) | currency:'USD'}}
                    {{pricePoint.textAfter}}
                </div>

                <!-- Content Item -->
                <div [style.padding.px]="productService.product.pricePoints.length > 1 ? 8 : 0">
                    <ng-container *ngFor="let content of productService.product.content">

                        <div *ngIf="content.priceIndices[i]" class="content-item">
                            <div class="img-container">
                                <img *ngIf="content.icon.url" [src]="'images/' + content.icon.url">
                            </div>

                            <div class="content-title">
                                {{content.name}}
                            </div>
                        </div>
                    </ng-container>
                </div>
            </div>
        </div>
    </ng-container>
</div>